#!/usr/bin/env bash
set -e

# First argument: template for gibo (e.g., "Python", "Node")
# form https://github.com/github/gitignore
template="$1"

if [ -z "$template" ]; then
  echo "Usage: $0 <template>"
  exit 1
fi

# Ensure gibo is installed
if ! command -v gibo >/dev/null 2>&1; then
  echo "gibo is not installed. Please install it first."
  exit 1
fi

# Append gibo template to .gitignore
echo "# Generated from gibo template: $template" >> .gitignore
gibo dump "$template" >> .gitignore

# Append custom env ignores
cat >> .gitignore <<'EOF'

.vscode/
.idea/
*.DS_Store
.bolt/


# Devenv
.devenv*
devenv.local.nix

# direnv
.direnv

# pre-commit
.pre-commit-config.yaml
EOF

echo "âœ… .gitignore updated with $template + custom ignores"
